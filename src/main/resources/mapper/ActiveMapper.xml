<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.robben.bbs.mapper.ActiveMapper">    <resultMap id="getActive" type="java.util.HashMap">        <discriminator javaType="java.lang.String" column="action">            <case value="关注了" resultMap="userActive"></case>            <case value="发表了帖子" resultMap="postActive"></case>            <case value="点赞了帖子" resultMap="postActive"></case>            <case value="收藏了帖子" resultMap="postActive"></case>            <case value="点赞了" resultMap="squareActive"></case>            <case value="在广场发表了" resultMap="squareActive"></case>        </discriminator>    </resultMap>    <resultMap id="userActive" type="java.util.HashMap">        <id column="id" javaType="java.lang.Integer"></id>        <result column="action" property="action"                javaType="java.lang.String"></result>        <result column="time" property="time"                javaType="java.sql.Timestamp"></result>        <association property="content"  column="content"                     javaType="java.util.HashMap"                     select="com.robben.bbs.mapper.OrdinaryUserMapper.getUserById">        </association>    </resultMap>    <resultMap id="postActive" type="java.util.HashMap">        <id column="id" javaType="java.lang.Integer"></id>        <result column="action" property="action"                javaType="java.lang.String"></result>        <result column="time" property="time"                javaType="java.sql.Timestamp"></result>        <association property="content"  column="content"                     javaType="com.robben.bbs.pojo.Post"                     select="com.robben.bbs.mapper.PostMapper.getPostByPostId">        </association>    </resultMap>    <resultMap id="squareActive" type="java.util.HashMap">        <id column="id" javaType="java.lang.Integer"></id>        <result column="action" property="action"                javaType="java.lang.String"></result>        <result column="time" property="time"                javaType="java.sql.Timestamp"></result>        <association property="content"  column="content" javaType="com.robben.bbs.pojo.Square"                     select="com.robben.bbs.mapper.SquareMapper.getSquareById">        </association>    </resultMap>    <insert id="saveActive">        insert into active(userId,content,action)        values(#{userId},#{content},#{action})    </insert>    <delete id="deleteActive">        delete from active where userId=#{userId} and content=#{content} and `action`=#{action}    </delete>    <select id="getActive" resultMap="getActive">        select content,time,action from active where userId=#{userId} order by time desc    </select>    <delete id="deleteAllRelativeActive">        delete from active where content=#{content}    </delete></mapper>