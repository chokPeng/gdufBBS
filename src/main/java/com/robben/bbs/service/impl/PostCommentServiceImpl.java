package com.robben.bbs.service.impl;import com.robben.bbs.mapper.PostCommentMapper;import com.robben.bbs.service.PostCommentService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.web.multipart.MultipartFile;import java.io.File;import java.io.IOException;import java.util.List;@Servicepublic class PostCommentServiceImpl implements PostCommentService {   @Autowired    PostCommentMapper postCommentMapper;   final String basicPathName="/Users/pengchunkao/gdufBBSImage/";    @Override    public Integer savePostComment(MultipartFile multipartFile, Long postId,                               Integer commenterId,String content) throws IOException {        if(multipartFile!=null){            String pictureName=                    commenterId+System.currentTimeMillis()+"."+multipartFile.getContentType().substring(6);            File file=                    new File(basicPathName+pictureName);            multipartFile.transferTo(file);            return postCommentMapper.savePostComment(pictureName,postId,commenterId,                    content);        }        return postCommentMapper.savePostComment(null,postId,commenterId,content);    }    /**     * 查询该评论是否有picture，有就先删除图片     * @param id     * @return     */    @Override    public Integer deletePostCommentById(Integer id,String pictureName) {        if(pictureName!=null){            File file=new File(basicPathName+pictureName);            file.delete();        }        return postCommentMapper.deletePostCommentById(id);    }    /**     * 先查询帖子的评论，再删除帖子的图片     * @param postId     * @return     */    @Override    public Integer deletePostCommentByPostId(Long postId) {        List<String> pictureListToDelete=                postCommentMapper.getPostCommentPictureByPostId(postId);        if(pictureListToDelete.size()!=0){            for (String picture:pictureListToDelete){                File file=new File(basicPathName+picture);                file.delete();            }        }        return postCommentMapper.deletePostCommentByPostId(postId);    }}