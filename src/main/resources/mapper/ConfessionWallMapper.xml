<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.robben.bbs.mapper.ConfessionWallMapper">    <resultMap id="confessionWall" type="com.robben.bbs.pojo.ConfessionWall">        <id column="id" property="id"></id>        <result column="content" property="content"></result>        <result column="postingTime" property="postingTime"></result>        <result column="like" property="like"></result>        <result column="topic" property="topic"></result>        <association property="poster" column="posterId"                     select="com.robben.bbs.mapper.OrdinaryUserMapper.getUserById">        </association>        <collection column="id" property="comments"                    select="com.robben.bbs.mapper.ConfessionWallCommentMapper.getConfessionWallCommentsByWallId">        </collection>        <collection property="confessionWallImage" column="id"                    select="com.robben.bbs.mapper.ImageMapper.getImageLocationByConfessionWallId">        </collection>    </resultMap>    <select id="getConfessionWall"            resultMap="confessionWall">        select id,postingTime,posterId,content,topic from confessionWall        <if test="type!=null">            where topic=#{topic}        </if>        order by postingTime DESC    </select>    <select id="getConfessionWallById"            resultType="com.robben.bbs.pojo.ConfessionWall">        select  * from confessionWall where id=#{id}    </select>    <select id="getConfessionWallByPosterId"            resultType="com.robben.bbs.pojo.ConfessionWall">        select * from confessionWall where posterId=#{posterId}    </select>    <insert id="saveConfessionWall">        insert into confessionWall(posterId,content,id,topic) values       (#{posterId},#{content},#{id},#{topic})    </insert>    <delete id="deleteConfessionWallById">        delete from confessionWall where id=#{id}    </delete>    <update id="updateConfessionWall"            parameterType="com.robben.bbs.pojo.ConfessionWall">        update confessionWall set        <trim suffixOverrides=",">            <if test="content!=null">                content=#{content},            </if>            <if test="like!=null">                like=#{like},            </if>        </trim>         where id=#{id}    </update>    <update id="addConfessionWallLike" parameterType="java.lang.Long">        update confessionWall set like=like+1 where id=#{id}    </update>    <update id="decreaseConfessionWallLike" parameterType="java.lang.Long">        update confessionWall set like=like-1 where id=#{id}    </update>    <select id="getUserConfessionWallLike" resultType="java.lang.Long">        select confessionWallId from confessionWallLike where userId=#{userId}    </select>    <delete id="deleteConfessionWallLike" parameterType="java.lang.Long">        delete from  confessionWallLike  where userId=#{userId} and confessionWallId=#{confessionWallId}    </delete></mapper>