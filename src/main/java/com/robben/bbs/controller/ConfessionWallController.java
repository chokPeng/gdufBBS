package com.robben.bbs.controller;import com.robben.bbs.pojo.ConfessionWall;import com.robben.bbs.service.ConfessionWallService;import com.robben.bbs.utilities.ResultInfo;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.*;import org.springframework.web.multipart.MultipartFile;import java.io.File;import java.io.IOException;@RestControllerpublic class ConfessionWallController {    @Autowired    ConfessionWallService confessionWallService;    /**     *     * @return 所有表白墙的内容     */    @GetMapping("/confessionWall")    public ResultInfo getConfessionWall(){        return ResultInfo.success(confessionWallService.getConfessionWall());    }    /**     * 接受多文件和userId，content参数，并将文件存入磁盘     * @param multipartFile1 存放多个文件的数组     * @param userId     * @param content     * @return 成功则true     * @throws IOException     */    @PostMapping("/confessionWall")    public ResultInfo postConfessionWall(@RequestParam("file") MultipartFile[] multipartFile1,                                      @RequestParam("userId") Integer userId,                                      @RequestParam("content") String content) throws IOException {        ConfessionWall confessionWall=new ConfessionWall();        confessionWall.setUserId(userId);        confessionWall.setContent(content);        for (int i=0;i<multipartFile1.length;i++) {            int temp=i+1;   //因为i是从0开始的，而我想命名file从序号1开始，即当i=0时，命名为"file1"            String imageName =                    "file" + temp+ "_" + userId + "." + multipartFile1[i].getContentType().substring(6);            File file = new File("/Users/pengchunkao/test/" + imageName);            multipartFile1[i].transferTo(file);            switch (i) {                case 0:                    confessionWall.setImage1("http://localhost:8090/image" +                            "/" + imageName);                    continue;                case 1:                    confessionWall.setImage2("http://localhost:8090/image" +                            "/" + imageName);                    continue;                case 2:                    confessionWall.setImage3("http://localhost:8090/image" +                            "/" + imageName);                    continue;            }        }        return ResultInfo.success(confessionWallService.postConfessionWall(confessionWall));    }}