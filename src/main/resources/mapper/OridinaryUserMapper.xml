<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.robben.bbs.mapper.OrdinaryUserMapper">    <resultMap id="idAndPasswordAndAuthorities"               type="com.robben.bbs.pojo.OrdinaryUser">        <id column="userId" property="userId"></id>        <result column="password" property="password"></result>        <collection column="userId" property="authorities"                    select="com.robben.bbs.mapper.OrdinaryUserMapper.getAuthoritiesByUserId">        </collection>    </resultMap>    <!--通用的ordinary信息-->    <resultMap id="commonInfo" type="java.util.HashMap">        <id column="userId" property="userId" javaType="java.lang.Integer"></id>        <result column="username" property="username"                javaType="java.lang.String"></result>        <result column="avatar" property="avatar" javaType="java.lang.String"></result>        <result column="level" property="level" javaType="java.lang.Integer"></result>        <result column="location" property="location" javaType="java.lang.String"></result>        <result column="sex" property="sex" javaType="java.lang.String"></result>        <result column="introduction" property="introduction" javaType="java.lang.String"></result>        <result column="joinTime" property="joinTime"                javaType="java.sql.Timestamp"></result>    </resultMap>    <resultMap id="userIdAndAvatar" type="java.util.HashMap">        <id column="userId" property="userId" javaType="java.lang.Integer"></id>        <result column="avatar" property="avatar"                javaType="java.lang.String"></result>    </resultMap>    <select id="getAuthoritiesByUserId" parameterType="java.lang.Integer"            resultType="org.springframework.security.core.authority.SimpleGrantedAuthority">        select role from authorities where userId=#{userId}    </select>    <select id="queryByUsername" parameterType="java.lang.String"            resultMap="idAndPasswordAndAuthorities">        select o.password,o.userId from ordinaryUser o where        username=#{username}    </select>    <select id="getUserIdAndAvatarByUsername" resultMap="userIdAndAvatar">        select userId,avatar from ordinaryUser where username=#{username}    </select>    <select id="getUserById" parameterType="java.lang.Integer"            resultMap="commonInfo">        select userId,username,avatar,level,location,sex,introduction,joinTime        from ordinaryUser where userId=#{id}    </select>    <insert id="register" parameterType="com.robben.bbs.pojo.OrdinaryUser">        insert into ordinaryUser(username,password)        values(#{username},#{password})    </insert></mapper>