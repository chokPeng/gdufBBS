<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.robben.bbs.mapper.SquareMapper">    <resultMap id="square" type="com.robben.bbs.pojo.Square">        <id column="id" property="id"></id>        <result column="content" property="content"></result>        <result column="postingTime" property="postingTime"></result>        <result column="like" property="like"></result>        <result column="topic" property="topic"></result>        <association property="poster" column="posterId"                     select="com.robben.bbs.mapper.OrdinaryUserMapper.getUserById">        </association>        <collection column="id" property="comments"                    select="com.robben.bbs.mapper.SquareCommentMapper.getSquareCommentsBySquareId">        </collection>        <collection property="squareImage" column="id"                    select="com.robben.bbs.mapper.ImageMapper.getImageLocationBySquareId">        </collection>    </resultMap>    <select id="getSquare" resultMap="square">        select id,postingTime,posterId,content,topic,`like` from square        <if test="type!=null">            where topic=#{topic}        </if>        order by postingTime DESC    </select>    <select id="getSquareById"            resultMap="square">        select  * from square where id=#{id}    </select>    <select id="getSquareByPosterId"            resultType="com.robben.bbs.pojo.Square">        select * from square where posterId=#{posterId}    </select>    <insert id="saveSquare">        insert into square(posterId,content,id,topic) values       (#{posterId},#{content},#{id},#{topic})    </insert>    <delete id="deleteSquareById">        delete from square where id=#{id}    </delete>    <update id="updateSquare"            parameterType="com.robben.bbs.pojo.Square">        update square set        <trim suffixOverrides=",">            <if test="content!=null">                content=#{content},            </if>            <if test="like!=null">                `like`                =#{like},            </if>        </trim>         where id=#{id}    </update>    <update id="addSquareLike" parameterType="java.lang.Long">        update square set  `like`=`like`+1 where id=#{id}    </update>    <update id="decreaseSquareLike" parameterType="java.lang.Long">        update square set `like`=`like`-1 where id=#{id}    </update>    <select id="getUserSquareLike" resultType="java.lang.Long">        select squareId from squareLike where userId=#{userId}    </select>    <delete id="deleteSquareLike" parameterType="java.lang.Long">        delete from  squareLike  where userId=#{userId} and squareId=#{squareId}    </delete>    <insert id="saveSquareLike">        insert into squareLike(userId,squareId) values(#{userId},#{squareId})    </insert></mapper>