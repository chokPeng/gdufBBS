package com.robben.bbs.controller;import com.robben.bbs.service.PostService;import com.robben.bbs.utilities.ResultInfo;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.*;import org.springframework.web.multipart.MultipartFile;import java.io.IOException;@RestController@RequestMapping("/post")public class PostController {    private final PostService postService;    @Autowired    public PostController(PostService postService){        this.postService=postService;    }    @GetMapping    public ResultInfo getAllPosts(){        return ResultInfo.success(postService.getAllPosts());    }    @GetMapping("/{id}")    public ResultInfo getPostByPostId(@PathVariable("id") Long postId){        return ResultInfo.success(postService.getPostByPostId(postId));    }    /**     * 发布帖子     * @param     * @return     */    @PostMapping    public ResultInfo savePost(@RequestParam("pictures")MultipartFile[] pictures,                               @RequestParam("posterId") Integer posterId,                               @RequestParam("content") String content,                               @RequestParam("tittle")String title,                               @RequestParam("topic")String topic) throws IOException {        int result=postService.savePost(pictures, posterId, content, title,                topic);        if(result==0){            return ResultInfo.fail("保存失败");        }        return ResultInfo.success();    }    @PatchMapping    public ResultInfo updatePost(@RequestParam("pictures") MultipartFile[] multipartFiles,                                 Long postId,String topic,String title,String content,                                  Integer readingTime) throws IOException {        int result=postService.updatePost(multipartFiles,postId,topic,title, content,                readingTime);        if(result==0){            return ResultInfo.fail("修改失败");        }        return ResultInfo.success();    }    @DeleteMapping    public ResultInfo  deletePostById(Long postId){        int result=postService.deletePostById(postId);        if(result==1){            return ResultInfo.success();        }        return ResultInfo.fail("删除失败");    }}