package com.robben.bbs.controller;import com.robben.bbs.pojo.ConfessionWall;import com.robben.bbs.service.ConfessionWallService;import com.robben.bbs.utilities.ResultInfo;import org.apache.ibatis.annotations.Param;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.*;import org.springframework.web.multipart.MultipartFile;import java.io.IOException;import java.util.List;@RestController@RequestMapping("/confessionWall")public class ConfessionWallController {    private final ConfessionWallService confessionWallService;    @Autowired    public ConfessionWallController(ConfessionWallService confessionWallService){        this.confessionWallService=confessionWallService;    }    /**     *  查看表白墙     * @return 所有表白墙的内容     */    @GetMapping    public ResultInfo getConfessionWall(){        List<ConfessionWall> result=                confessionWallService.getAllConfessionWall();        return ResultInfo.success(result);    }    /**     * 表白墙发帖子     * 接受多文件和userId，content参数，并将文件存入磁盘     * @param multipartFile 存放多个文件的数组     * @param posterId     * @param content     * @return 成功则true     * @throws IOException     */    @PostMapping    public ResultInfo saveConfessionWall(@RequestParam("file") MultipartFile[] multipartFile,                                      @RequestParam("posterId") Integer posterId,                                      @RequestParam("content") String content) throws IOException {        int res=confessionWallService.saveConfessionWall(posterId,content,                multipartFile);        if(res==0){            return ResultInfo.fail("保存失败");        }        return ResultInfo.success();    }    /**     * 删除表白墙     * @param id 表白墙id     * @return     */    @DeleteMapping    public ResultInfo deleteConfessionWallById(Integer id){        int result=confessionWallService.deleteConfessionWallById(id);        if(result==0){            return ResultInfo.fail("删除失败");        }        return ResultInfo.success();    }    /**     * 修改表白墙内容     * @param confessionWall     * @return     */    @PatchMapping    public ResultInfo updateConfessionWall(@RequestBody ConfessionWall confessionWall){        int res=confessionWallService.updateConfessionWall(confessionWall);        if(res==0){            return ResultInfo.fail("修改失败");        }        return ResultInfo.success();    }    @PostMapping("/like")    public ResultInfo addLike(Integer id, Integer userId){        return (confessionWallService.saveConfessionWallLike(id,userId)==1)?                ResultInfo.success():ResultInfo.fail("保存失败");    }}